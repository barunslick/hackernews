(this["webpackJsonphackernews-ui"]=this["webpackJsonphackernews-ui"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,function(e,t,n){e.exports=n(51)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),s=(n(32),n(7)),i=n(8),l=n(11),u=n(10),m=(n(33),n(26));n(34);var h=function(e){var t=e.className,n=(e.btnContent,e.onClick),a=Object(m.a)(e,["className","btnContent","onClick"]);return r.a.createElement("button",{className:"button ".concat(t),onClick:n},a.children)};var d=function(e){return function(t){Object(l.a)(a,t);var n=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).closeModal=function(){e.props.history.goBack()},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Modal"},r.a.createElement(h,{className:"Modal__closeButton",onClick:this.closeModal},"\xd7"),r.a.createElement(e,this.props)),r.a.createElement("div",{className:"Modal-background",onClick:this.closeModal}))}}]),a}(r.a.Component)},f=(n(35),n(14));var p=function(){return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"Header__container"},r.a.createElement("h1",null,r.a.createElement(f.b,{to:"/"}," Hackernews"))))},v=n(3),b=n.n(v),E=n(9),y="https://hacker-news.firebaseio.com/v0/",g="".concat(y,"item/"),k="".concat(y,"topstories.json"),C="https://news.ycombinator.com/user?id=";function w(e){return N.apply(this,arguments)}function N(){return(N=Object(E.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return null}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(15);var _=function(e){return function(t){Object(l.a)(a,t);var n=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=n.call(this)).state={isLoading:!0,items:[],error:!1},e}return Object(i.a)(a,[{key:"getStories",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(k);case 2:if(null!==(t=e.sent)){e.next=6;break}return this.setState({error:!0}),e.abrupt("return");case 6:t.error?this.setState({showLoadingText:"We seem to have problem connecting to Hackernews. Try again later.(Bad URL)"}):this.setState({items:t,isLoading:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getStories()}},{key:"render",value:function(){return this.state.error?r.a.createElement("p",{className:"firstFetchLoadP"},"Cant connect with hackernews right now."):r.a.createElement("div",null,this.state.isLoading?r.a.createElement("div",{className:"loader center"},"Loading..."):r.a.createElement(e,{items:this.state.items}))}}]),a}(r.a.Component)},j=n(1);function S(e){var t=Math.floor((new Date).getTime()/1e3-e),n=Math.floor(t/31536e3);return n>1?n+"y":(n=Math.floor(t/2592e3))>1?n+"m":(n=Math.floor(t/86400))>=1?n+"d":(n=Math.floor(t/3600))>=1?n+"h":(n=Math.floor(t/60))>1?n+"m ":Math.floor(t)+"s"}n(42);var L=function(e){var t=e.by,n=e.time,a=e.text;return e.isLoading?r.a.createElement("div",{className:"CommentCard__sub-content"},r.a.createElement("div",{className:"loader"},"Loading...")):void 0===t?null:r.a.createElement("div",{className:"CommentCard__sub-content"},r.a.createElement("div",{className:"CommentCard__header"},r.a.createElement("a",{className:"CommentCard__username",href:"".concat(C+t)},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}})),r.a.createElement("span",null,"\xb7"),r.a.createElement("span",{className:"CommentCard__time"},S(n))),r.a.createElement("p",{className:"CommentCard__textContent",dangerouslySetInnerHTML:{__html:a}}))},O=(n(43),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,content:{},error:!1},a.controller=new AbortController,a.commentId=a.props.commentId,a}return Object(i.a)(n,[{key:"getComments",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(g+this.commentId,".json"),e.next=3,fetch(t,{signal:this.controller.signal}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return null}));case 3:if(n=e.sent,!this.controller.signal.aborted){e.next=6;break}return e.abrupt("return");case 6:if(null!==n){e.next=9;break}return this.setState({error:!0}),e.abrupt("return");case 9:this.setState({content:n,isLoading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getComments()}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",{className:"Comment"},"Cant fetch comment.");var e=this.state.content||{},t=e.by,a=e.time,o=e.text,c=e.kids;return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement("div",{className:"Comment"},r.a.createElement(L,{isLoading:!0})):r.a.createElement("div",{className:"Comment"},r.a.createElement(L,{isLoading:!1,by:t,time:a,text:o}),(c||[]).map((function(e){return r.a.createElement(n,{key:e,commentId:e,type:"child"})}))))}}]),n}(r.a.Component)),x=(n(44),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,kids:[],title:"",result:{},error:!1},a.controller=new AbortController,a.storyId=a.props.match.params.id,a}return Object(i.a)(n,[{key:"getComments",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(g+this.storyId,".json"),e.next=3,fetch(t,{signal:this.controller.signal}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return null}));case 3:if(n=e.sent,!this.controller.signal.aborted){e.next=6;break}return e.abrupt("return");case 6:if(null!==n){e.next=9;break}return this.setState({error:!0}),e.abrupt("return");case 9:this.setState({kids:n.kids,title:n.title,result:n,isLoading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getComments()}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",{className:"FullStoryView"},"Cant fetch content right now."):r.a.createElement("div",{className:"FullStoryView"},this.state.isLoading?r.a.createElement("div",{className:"loader center"},"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"FullStoryView__header"},r.a.createElement("h2",null,r.a.createElement("a",{href:this.state.result.url||"#"},this.state.title)),r.a.createElement("div",{className:"FullStoryView__details"},r.a.createElement("span",{className:"FullStoryView__username"},r.a.createElement("span",{className:"gray"},"By: "),r.a.createElement("a",{href:C+this.state.result.by},this.state.result.by)),r.a.createElement("span",null,"\xb7"),r.a.createElement("span",null,r.a.createElement("span",{className:"gray"},"Score: "),this.state.result.score," "),r.a.createElement("span",null,"\xb7"),r.a.createElement("span",null,S(this.state.result.time)," ago"))),r.a.createElement("div",{className:"FullStoryView__comment"},r.a.createElement("h3",{className:"FullStoryView__comment-header"},"Comments"),(this.state.kids||[]).map((function(e){return r.a.createElement(O,{key:e,commentId:e})})))))}}]),n}(r.a.Component)),M=n(20),I=n(25),F=(n(45),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,content:{},error:!1},a.controller=new AbortController,a}return Object(i.a)(n,[{key:"getStories",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(g+this.props.itemId,".json"),e.next=3,fetch(t,{signal:this.controller.signal}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return null}));case 3:if(n=e.sent,!this.controller.signal.aborted){e.next=6;break}return e.abrupt("return");case 6:if(null!==n){e.next=9;break}return this.setState({error:!0}),e.abrupt("return");case 9:this.setState({content:n,isLoading:!1,error:!1}),this.props.updateCacheData(n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){null===this.props.cachedData?this.getStories():this.setState({content:this.props.cachedData,isLoading:!1})}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",{className:"StoryLisItem"},"Can't get your stories");var e=this.state.content||{},t=e.title,n=e.by;return r.a.createElement("div",{className:"StoryLisItem"},this.state.isLoading?r.a.createElement("div",{className:"loader"},"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"StoryLisItem__title"},r.a.createElement(f.b,{to:{pathname:"/story/".concat(this.state.content.id)}},t)),r.a.createElement("p",{className:"StoryLisItem__details"},r.a.createElement("span",{className:"StoryLisItem__author"},"By: ",r.a.createElement("a",{href:C+n},n)),r.a.createElement("span",{className:"StoryLisItem__time"},S(this.state.content.time)," ago"))))}}]),n}(r.a.Component)),D=n(24),B=n.n(D),H=(n(46),{padding:10,boxSizing:"border-box"});var V=function(e){var t=Object(I.a)(e.items),n={};function a(e){var t=e.id;n[t]=e}return r.a.createElement("div",{className:"StoriesContainer"},r.a.createElement(B.a,{source:t,rowHeight:100,renderItem:function(e){var o=e.index,c=e.style;return r.a.createElement("div",{key:o,style:Object(M.a)(Object(M.a)({},H),c)},r.a.createElement(F,{key:o,itemId:t[o],updateCacheData:a,cachedData:n.hasOwnProperty(t[o])?n[t[o]]:null}))}}))},W=(n(47),n(48),n(49),n(50),d(x)),A=_(V);var T=function(){return r.a.createElement(f.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("div",{className:"Container"},r.a.createElement(j.a,{path:"/",component:A}),r.a.createElement(j.a,{path:"/story/:id",component:W}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[27,1,2]]]);
//# sourceMappingURL=main.c59f09c0.chunk.js.map